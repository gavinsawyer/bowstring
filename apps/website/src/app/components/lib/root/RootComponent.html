<div class="harness"
  (click)="$event.stopPropagation();"
  (keydown)="$event.key === 'Escape' || $event.stopPropagation();"
  tabindex="-1">
  <div class="between"><ng-container *ngTemplateOutlet="contentTemplate" /></div>
</div>

<standard--sheet #currencySheetComponent>
  @defer {<standard--heading-group>
    <standard--header>
      <h6 i18n="@@apps--Website--Components--Root--Sheets--Currency--Header">Select your currency.</h6>
    </standard--header>
    <p i18n="@@apps--Website--Components--Root--Sheets--Currency--Paragraph">View prices with a live exchange rate from {{ brand.currency }}&nbsp;&lpar;{{ currencies[brand.currency].name }}&rpar;.</p>
  </standard--heading-group>
  <standard--divider />
  <standard--section>
    @for (currency of currencyKeys; track $index) {<standard--button
      [disabled]="currency === currencyService.userCurrency$()"
      level="2"
      (output)="currencyService.userCurrency$.set(currency); currencySheetComponent.openModel$.set(false);">
      <standard--symbol [input]="currencies[currency].symbolName" />
      <standard--label [input]="currency + ' (' + currencies[currency].name + ')'" />
    </standard--button>}
  </standard--section>}
</standard--sheet>
<standard--sheet #localeSheetComponent>
  @defer {<standard--header>
    <h6 i18n="@@apps--Website--Components--Root--Sheets--Locale--Header">Select your locale.</h6>
  </standard--header>
  <standard--divider />
  <standard--section>
    @for (locale of localeIds; track $index) {<standard--button
      [disabled]="locale === localeId"
      level="2"
      (output)="locale === localeId || changeLocale(locale);">
      <standard--symbol input="Globe" />
      <standard--label [input]="localeDisplayNames.of(locale) || locale" />
    </standard--button>}
  </standard--section>}
</standard--sheet>
<standard--sheet #signinSheetComponent>
  @defer {<standard--signin [sheetComponent]="signinSheetComponent" />}
</standard--sheet>
<standard--sheet #signoutSheetComponent>
  @defer {<standard--signout [sheetComponent]="signoutSheetComponent" />}
</standard--sheet>
<standard--sheet #signupSheetComponent>
  @defer {<standard--signup [sheetComponent]="signupSheetComponent" />}
</standard--sheet>

<ng-template #contentTemplate>
  <standard--main>
    @if (bannerTemplateRef$(); as bannerTemplateRef) {<standard--banner>
      <ng-container *ngTemplateOutlet="bannerTemplateRef" />
    </standard--banner>}
    <standard--flexbox-container
      alignItems="last baseline"
      flexDirection="row"
      flexWrap="wrap"
      gapColumn="calc(var(--standard--root--gap-column) * pow(var(--phi), -1))"
      gapRow="calc(var(--standard--root--gap-row) * pow(var(--phi), -1))"
      justifyContent="space-between">
      <standard--header fontSizeExponent="-3">
        <h1 style="font-family: Anybody, var(--standard--root--font-family), sans-serif; font-weight: 900; font-variation-settings: 'wdth' 112.5;">
          <standard--link
            exact
            url="/">
            <standard--label [input]="brand.title" />
          </standard--link>
        </h1>
      </standard--header>
      <standard--nav>
        @if (standardRoutes | standardFindRouteByPath:'gallery'; as route) {<standard--link [url]="'/' + route.path">
          <standard--label [input]="route.data?.['title']" />
        </standard--link>}
        @if (standardRoutes | standardFindRouteByPath:'shop'; as route) {<standard--link [url]="'/' + route.path">
          <standard--label [input]="route.data?.['title']" />
        </standard--link>}
        @for (route of appRoutes.slice(1); track $index) {<standard--link [url]="'/' + route.path">
          <standard--label [input]="route.data?.['title']" />
        </standard--link>}
        @if (standardRoutes | standardFindRouteByPath:'account'; as route) {<standard--link [url]="'/' + route.path">
          <standard--label [input]="route.data?.['title']" />
        </standard--link>}
      </standard--nav>
    </standard--flexbox-container>
    <router-outlet />
    @if (aboveTemplateRef$(); as aboveTemplateRef) {<standard--above>
      <ng-container *ngTemplateOutlet="aboveTemplateRef" />
    </standard--above>}
  </standard--main>
  @defer {@if (belowTemplateRef$(); as belowTemplateRef) {<standard--below>
    <ng-container *ngTemplateOutlet="belowTemplateRef" />
  </standard--below>}}
  <standard--footer>
    <standard--header>
      <h6 style="font-family: Anybody, var(--standard--root--font-family), sans-serif; font-weight: 800; font-variation-settings: 'wdth' 112.5;">
        <standard--link
          exact
          url="/">
          <standard--label [input]="brand.title" />
        </standard--link>
      </h6>
    </standard--header>
    <standard--section
      flexDirection="row"
      flexWrap="wrap"
      justifyContent="space-between">
      <standard--flexbox-container flexDirection="row">
        <standard--flexbox-container alignItems="flex-start">
          @if (standardRoutes | standardFindRouteByPath:'gallery'; as route) {<standard--link [url]="'/' + route.path">
            <standard--label [input]="route.data?.['title']" />
          </standard--link>}
          @if (standardRoutes | standardFindRouteByPath:'shop'; as route) {<standard--link [url]="'/' + route.path">
            <standard--label [input]="route.data?.['title']" />
          </standard--link>}
          @for (route of appRoutes.slice(1); track $index) {<standard--link [url]="'/' + route.path">
            <standard--label [input]="route.data?.['title']" />
          </standard--link>}
        </standard--flexbox-container>
        @if (!authenticationService.user$() || authenticationService.user$()?.isAnonymous) {<standard--flexbox-container alignItems="flex-start">
          <standard--link
            [disabled]="signinSheetComponent.openModelWithTransform$()"
            (output)="signinSheetComponent.openModel$.set(true);">
            <standard--label
              i18n-input
              input="Sign in" />
          </standard--link>
          <standard--link
            [disabled]="signupSheetComponent.openModelWithTransform$()"
            (output)="signupSheetComponent.openModel$.set(true);">
            <standard--label
              i18n-input
              input="Create your account" />
          </standard--link>
        </standard--flexbox-container>} @else {<standard--flexbox-container alignItems="flex-start">
          @if (standardRoutes | standardFindRouteByPath:'account'; as route) {<standard--link [url]="'/' + route.path">
            <standard--label [input]="route.data?.['title']" />
          </standard--link>}
          <standard--link (output)="signoutSheetComponent.openModel$.set(true);">
            <standard--label
              i18n-input
              input="Sign out" />
          </standard--link>
        </standard--flexbox-container>}
        <standard--flexbox-container alignItems="flex-start">
          @if (standardRoutes | standardFindRouteByPath:'privacy'; as route) {<standard--link [url]="'/' + route.path">
            <standard--label [input]="route.data?.['title']" />
          </standard--link>}
          @if (standardRoutes | standardFindRouteByPath:'terms'; as route) {<standard--link [url]="'/' + route.path">
            <standard--label [input]="route.data?.['title']" />
          </standard--link>}
        </standard--flexbox-container>
      </standard--flexbox-container>
      <standard--flexbox-container flexDirection="row">
        <standard--flexbox-container alignItems="flex-start">
          <standard--link>
            <standard--symbol input="ArrowUpForwardAppFill" />
            <standard--label input="Instagram" />
          </standard--link>
        </standard--flexbox-container>
      </standard--flexbox-container>
    </standard--section>
    <standard--divider />
    <standard--section
      flexDirection="row"
      flexWrap="wrap"
      [justifyContent]="responsivityService.pastMediumBreakpoint$() ? 'flex-start' : 'center'">
      <standard--link
        disabled>
        @if (connectivityService.connected$()) {<standard--symbol input="Network" />
        <standard--label
          i18n-input
          input="Connected" />} @else {<standard--symbol input="NetworkSlash" />
        <standard--label
          i18n-input
          input="Disconnected" />}
      </standard--link>
    </standard--section>
    <standard--section
      flexDirection="row"
      flexWrap="wrap"
      justifyContent="center">
      <standard--flexbox-container
        flexDirection="row"
        flexGrow="1"
        flexWrap="wrap"
        [justifyContent]="responsivityService.pastMediumBreakpoint$() ? 'flex-start' : 'center'">
        <span style="white-space: nowrap;">@if (responsivityService.pastMediumBreakpoint$()) {Copyright&nbsp;}&copy;&nbsp;@if (responsivityService.pastMediumBreakpoint$()) {2025&nbsp;}<standard--link
          inline
          [url]="brand.copyrightHolderUrl">
          <standard--label [input]="brand.copyrightHolder" />
        </standard--link></span>
        <span style="white-space: nowrap;">{{ packageVersion }}&dash;mini&nbsp;&lpar;<standard--link
          inline
          [url]="'https://github.com/gavinsawyer/standard/commit/' + gitInfoPartial.hash">
          <standard--label [input]="gitInfoPartial.hash || ''" />
        </standard--link>&rpar;</span>
      </standard--flexbox-container>
      <standard--flexbox-container
        [flexBasis]="responsivityService.pastMediumBreakpoint$() ? 'auto' : '100%'"
        flexDirection="row"
        justifyContent="center">
        <standard--link
          [disabled]="localeSheetComponent.openModelWithTransform$()"
          (output)="localeSheetComponent.openModel$.set(true);">
          <standard--symbol input="Globe" />
          <standard--label [input]="localeDisplayNames.of(localeId) || localeId" />
        </standard--link>
        @if (standardRoutes | standardFindRouteByPath:'shop') {<standard--link
          [disabled]="currencySheetComponent.openModelWithTransform$()"
          (output)="currencySheetComponent.openModel$.set(true);">
          <standard--symbol [input]="currencies[currencyService.userCurrency$()].symbolName" />
          <standard--label [input]="currencyService.userCurrency$()"/>
        </standard--link>}
      </standard--flexbox-container>
    </standard--section>
  </standard--footer>
</ng-template>
